import{initCarousel}from"./carousel.js";import{initMasks}from"./masks.js";import{initVolValidation}from"./validation.js";document.addEventListener("DOMContentLoaded",()=>{initMasks(),function(){if("undefined"==typeof Chart)return;const e=document.getElementById("chart-resources");e&&new Chart(e,{type:"pie",data:{labels:["Acolhimento","Tratamento","Reinserção","Prevenção"],datasets:[{data:[30,45,15,10]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}});const t=document.getElementById("chart-volunteers");t&&new Chart(t,{type:"line",data:{labels:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],datasets:[{label:"Atendimentos",data:[5,8,12,18,25,30,35,40,45,50,55,60],fill:!1}]},options:{responsive:!0,plugins:{legend:{display:!1}}}});const n=document.getElementById("chart-impact");n&&new Chart(n,{type:"bar",data:{labels:["Norte","Nordeste","Centro-Oeste","Sudeste","Sul"],datasets:[{label:"Beneficiários",data:[120,200,80,250,160]}]},options:{responsive:!0,plugins:{legend:{display:!1}}}})}(),document.querySelector(".carousel-slide")&&initCarousel(),document.getElementById("vol-form")&&initVolValidation(),console.log("Aplicação Sã e Salvo inicializada com módulos.")});export function initCarousel(){const e=document.querySelector(".carousel-slide");if(!e)return;const t=document.querySelectorAll(".carousel-slide img"),n=document.getElementById("prevBtn"),o=document.getElementById("nextBtn"),a=document.querySelector(".carousel-indicators");let i=0;const l=t.length;let s,r=t.length>0?t[0].clientWidth:0;const d=()=>{r||(r=t[0].clientWidth),e.style.transform=`translateX(${-i*r}px)`,c()},c=()=>{document.querySelectorAll(".indicator").forEach((e,t)=>{e.classList.remove("active"),t===i&&e.classList.add("active")})},u=()=>{i=i===l-1?0:i+1,d()},m=()=>{s=setInterval(u,3e3)},p=()=>{clearInterval(s),m()};window.addEventListener("resize",()=>{r=t[0].clientWidth,d()}),o.addEventListener("click",()=>{u(),p()}),n.addEventListener("click",()=>{i=0===i?l-1:i-1,d(),p()}),l>0&&(a.innerHTML="",t.forEach((e,t)=>{const n=document.createElement("div");n.classList.add("indicator"),0===t&&n.classList.add("active"),n.addEventListener("click",()=>{i=t,d(),p()}),a.appendChild(n)}),m(),console.log("Carrossel inicializado com sucesso."))}export function initMasks(){document.addEventListener("input",e=>{const t=e.target.closest("[data-mask]");t&&function(e,t){const n=e.target.value.replace(/\D/g,"");let o=n;"cpf"===t?o=n.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):"tel"===t?o=n.length<=10?n.replace(/(\d{2})(\d{4})(\d{0,4})/,"($1) $2-$3"):n.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):"cep"===t&&(o=n.replace(/(\d{5})(\d{3})/,"$1-$2")),e.target.value=o}(e,t.dataset.mask)})}function e(e,t){let n=e.nextElementSibling;n&&n.classList.contains("form-feedback")?n.querySelector("span").textContent=t:(n=document.createElement("p"),n.classList.add("form-feedback"),n.innerHTML=`<span style="color:red; font-size: 0.85em;">${t}</span>`,e.parentNode.insertBefore(n,e.nextSibling))}function t(e){const t=e.nextElementSibling;t&&t.classList.contains("form-feedback")&&t.remove()}function n(n){n.preventDefault();const o=n.target;let a=!0;const i=o.querySelector('[name="name"]');i&&i.value.trim().length<3?(e(i,"O nome deve ter no mínimo 3 letras."),a=!1):i&&t(i);const l=o.querySelector('[name="email"]');l&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value)?(e(l,"Por favor, insira um e-mail válido."),a=!1):l&&t(l);const s=o.querySelector('[name="cpf"]');if(s){11!==s.value.replace(/\D/g,"").length?(e(s,"CPF deve ter 11 dígitos."),a=!1):t(s)}a&&(alert("Formulário de Voluntariado validado e enviado! (Simulado)"),o.reset())}export function initVolValidation(){const e=document.getElementById("vol-form");e&&(e.addEventListener("submit",n),console.log("Validação de formulário de voluntariado inicializada."))}
